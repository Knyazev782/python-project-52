{% extends 'base.html' %}
{% load django_bootstrap5 %}

{% block content %}
  <h1>Список задач</h1>

  <!-- Форма фильтрации -->
  {% if filter %}
    <form method="get">
      {% bootstrap_form filter.form %}
      <button type="submit" class="btn btn-primary">Фильтровать</button>
    </form>
  {% endif %}

  <!-- Список задач -->
  {% if filter.qs %}
    <ul class="list-group mt-3">
      {% for task in filter.qs %}
        <li class="list-group-item">
          {{ task.name }} - Статус: {{ task.status.name }} - Исполнитель: {{ task.assigned_to.username }}
          <!-- Убраны метки для упрощения рендеринга -->
        </li>
      {% empty %}
        <li class="list-group-item">Нет задач по фильтру</li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Нет задач.</p>
  {% endif %}

  <a href="{% url 'task_create' %}" class="btn btn-success mt-3">Создать задачу</a>
  <a href="{% url 'tasks' %}" class="btn btn-secondary mt-3">Сбросить фильтр</a>
{% endblock %}